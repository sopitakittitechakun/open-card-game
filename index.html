<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ | ‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢365</title>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@700&display=swap" rel="stylesheet">
  <style>
    /* ... ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏ï‡∏±‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß) ... */
  </style>
</head>
<body>

  <!-- ‚úÖ ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô / ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß -->
  <div class="promo-banner">
    <img src="https://img2.pic.in.th/pic/photo_--_--deec69ba16a767e7.jpg" alt="‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏Ñ">
  </div>

  <!-- ‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å -->
  <div class="container">
    <img class="logo" src="https://img2.pic.in.th/pic/1735020594-1.png" alt="‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢365">
    <h2>üÇ™ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ | ‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢365</h2>
    <input type="text" id="phone" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" maxlength="10"><br>
    <button id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>

    <!-- ‚úÖ ‡πÇ‡∏ã‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ -->
    <div id="captureZone">
      <div id="cards"></div>
      <div id="rewardDisplay"></div>
    </div>

    <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Ñ‡∏õ -->
    <button id="captureBtn" style="display:none;">üì∏ ‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</button>
  </div>

  <!-- ‚úÖ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
  <audio id="flipSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_72b2a6d7f8.mp3" preload="auto"></audio>

  <!-- ‚úÖ html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- ‚úÖ ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏Å‡∏° -->
  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbybf8xUEJYD6TigG3QriRdEbKmZF3K3PQs7OvEAHV6Eg8dw4mdGD186N_OWToeS12ry/exec';
    let hasFlipped = false;

    document.getElementById('startBtn').addEventListener('click', startGame);

    function startGame() {
      const phone = document.getElementById("phone").value.trim();
      if (!/^0[0-9]{9}$/.test(phone)) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
      }

      const formData = new FormData();
      formData.append("phone", phone);

      fetch(scriptURL, {
        method: 'POST',
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        if (data.alreadyPlayed) {
          alert("‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ");
          return;
        }
        showCards(phone);
      });
    }

    function showCards(phone) {
      hasFlipped = false;
      document.getElementById("cards").innerHTML = "";
      document.getElementById("rewardDisplay").innerHTML = "";
      document.getElementById("captureBtn").style.display = "none";

      const numbers = shuffleArray([1,2,3,4,5,6,7,8,9,10]);
      numbers.forEach(num => {
        const wrapper = document.createElement("div");
        wrapper.className = "card";
        wrapper.dataset.number = num;

        const inner = document.createElement("div");
        inner.className = "inner-card";

        const front = document.createElement("div");
        front.className = "front";
        front.textContent = "?";

        const back = document.createElement("div");
        back.className = "back";

        const img = document.createElement("img");
        img.src = `https://raw.githubusercontent.com/sopitakittitechakun/open-card-rewards/main/${num}.png`;
        img.onerror = () => { img.style.display = 'none'; };

        const label = document.createElement("span");
        label.textContent = num;

        back.appendChild(label);
        back.appendChild(img);

        inner.appendChild(front);
        inner.appendChild(back);
        wrapper.appendChild(inner);

        wrapper.onclick = () => flipCard(wrapper, num, phone);
        document.getElementById("cards").appendChild(wrapper);
      });
    }

    function flipCard(card, number, phone) {
      if (hasFlipped) return;
      document.getElementById('flipSound').play();
      card.classList.add("opened");
      hasFlipped = true;

      let message = "";
      if (number === 10) {
        message = `üéâ ‡πÄ‡∏ö‡∏≠‡∏£‡πå ${phone} ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏Ç ${number}<br>‡∏Ç‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏û‡∏µ‡πà‡∏ô‡∏∞‡∏Ñ‡∏∞ üéâ<br>üì∏ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞`;
      } else {
        message = `üò¢ ‡πÄ‡∏ö‡∏≠‡∏£‡πå ${phone} ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏Ç ${number}<br>‡∏Ç‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞`;
      }

      document.getElementById("rewardDisplay").innerHTML =
        `<div class='reward-text'>${message}</div>`;

      document.getElementById("captureBtn").style.display = "inline-block";

      const formData = new FormData();
      formData.append("phone", phone);
      formData.append("reward", number);

      fetch(scriptURL, {
        method: 'POST',
        body: formData
      });
    }

    document.getElementById("captureBtn").addEventListener("click", () => {
      html2canvas(document.getElementById("captureZone")).then(canvas => {
        const link = document.createElement("a");
        link.download = "‡∏ú‡∏•‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢365.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }
  </script>

  <!-- ‚úÖ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Inspect Element -->
  <script>
    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô F12, Ctrl+Shift+I/J/C, Ctrl+U
    document.addEventListener('keydown', function(e) {
      if (e.key === 'F12' || 
          (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) || 
          (e.ctrlKey && e.key.toLowerCase() === 'u')) {
        e.preventDefault();
      }
    });

    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });

    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô DevTools ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å
    setInterval(function () {
      if (window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200) {
        document.body.innerHTML = '<h2 style="color:red;text-align:center;margin-top:50px;">üö´ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡∏¥‡∏î Developer Tools ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>';
      }
    }, 1000);
  </script>
</body>
</html>
