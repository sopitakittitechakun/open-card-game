<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏∏‡πà‡∏° | RR365</title>
<meta name="color-scheme" content="dark"/>
<style>
  :root{
    --bg:#0b0b0b; --line:rgba(255,255,255,.12);
    --txt:#fff; --muted:#cfcfcf;
    --accent:#ff2b2b; --accent2:#b80000;
  }
  *{box-sizing:border-box}
  body{
    margin:0;padding:24px;
    font-family:system-ui,-apple-system,"Segoe UI",Tahoma,sans-serif;
    background:radial-gradient(900px 500px at 50% -10%, rgba(255,60,60,.15), transparent 60%), var(--bg);
    color:var(--txt);
  }
  .card{
    max-width:560px;margin:0 auto;
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid var(--line); border-radius:24px; padding:18px;
    box-shadow:0 20px 50px rgba(0,0,0,.6);
  }
  h1{font-size:20px;margin:0 0 6px}
  p{margin:0 0 14px;color:var(--muted);line-height:1.6}
  label{display:block;margin:10px 0 6px;color:var(--muted)}
  input{
    width:100%;padding:12px 14px;border-radius:14px;
    border:1px solid var(--line);background:#0f0f0f;color:#fff;font-size:16px;
  }
  .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  button{
    flex:1;min-width:160px;
    padding:12px 14px;border-radius:14px;border:0;
    font-size:16px;font-weight:900;color:#fff;cursor:pointer;
  }
  .btnAlt{background:#2a2a2a}
  .btnMain{background:linear-gradient(135deg,var(--accent),var(--accent2))}
  button:disabled{opacity:.55;cursor:not-allowed}
  .msg{
    margin-top:12px;padding:12px;border-radius:14px;
    border:1px solid var(--line);background:rgba(0,0,0,.25);
    white-space:pre-line;display:none;line-height:1.6;
  }
  .ok{border-color:rgba(54,211,153,.4)}
  .err{border-color:rgba(255,90,95,.45)}
  .hint{font-size:12px;color:#bfbfbf;margin-top:10px;line-height:1.6}

  .copyBox{
    margin-top:12px;
    padding:12px;
    border-radius:14px;
    border:1px dashed rgba(255,255,255,.25);
    background:rgba(0,0,0,.25);
    display:none;
    align-items:center;
    gap:10px;
  }
  .copyCode{flex:1;font-weight:900;letter-spacing:1px;user-select:all}
  .copyBtn{
    padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:900;
    background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff;white-space:nowrap;
  }

  /* modal ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;padding:18px;z-index:9999;}
  .modal.show{display:flex;}
  .modalCard{width:min(560px,100%);border-radius:18px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));box-shadow:0 20px 60px rgba(0,0,0,.75);padding:16px;}
  .modalTitle{font-weight:900;font-size:18px;margin-bottom:10px;}
  .modalText{color:#e9e9e9;line-height:1.7;margin-bottom:12px;}
  .modalBtn{width:100%;padding:12px 14px;border-radius:14px;border:0;font-weight:900;cursor:pointer;color:#fff;background:linear-gradient(135deg,var(--accent),var(--accent2));}
</style>
</head>
<body>

<div class="card">
  <img src="https://img2.pic.in.th/photo_--_--0e7826f8427924c9.jpg"
       alt="‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ü‡∏£‡∏µ"
       style="max-width:100%; border-radius:16px; display:block; margin-bottom:12px;">

  <h1>üéÅ ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÄ‡πÄ‡∏à‡∏Å‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 38,888 ‡∏ö‡∏≤‡∏ó üéÅ</h1>
  <p>‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏∞‡∏≠‡∏≠‡∏Å ‚Äú‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‚Äù ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>

  <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
  <input id="phone" inputmode="numeric" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0611111111"/>

  <label id="capLabel" style="display:none;">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</label>
  <input id="captchaA" style="display:none;" placeholder="‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô"/>

  <div class="row">
    <button id="btnCheck" class="btnAlt" type="button">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
    <button id="btnIssue" class="btnAlt" type="button" disabled>‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î</button>
    <button id="btnJoin" class="btnMain" type="button" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î</button>
  </div>

  <div id="msg" class="msg"></div>

  <div id="copyWrap" class="copyBox">
    <div id="promoCode" class="copyCode">RRXXXXXXXX</div>
    <button id="btnCopy" class="copyBtn" type="button">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
  </div>

  <div class="hint">
    *‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡∏™‡∏∞‡∏™‡∏° ‚Äú‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‚Äù ‡∏Ñ‡∏£‡∏ö 365 ‡∏ö‡∏≤‡∏ó‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏∂‡∏á‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏Å‡∏£‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞<br>
    *‡∏ó‡∏≥‡∏¢‡∏≠‡∏î 10 ‡πÄ‡∏ó‡πà‡∏≤ ‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ 10 ‡πÄ‡∏ó‡πà‡∏≤<br>
    *‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô ‡∏ï‡πà‡∏≠ 1 ‡πÄ‡∏ö‡∏≠‡∏£‡πå/1 ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
  </div>

  <div class="hint" style="margin-top:10px;border:1px dashed rgba(255,255,255,.25);padding:10px;border-radius:14px;">
    üëâ ‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ü‡∏£‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà:<br>
    <a href="https://rumruay365.uk/events/free-credit" target="_blank" rel="noopener" style="color:#7dd3fc;font-weight:900;text-decoration:none;">
      https://rumruay365.uk/events/free-credit
    </a>
  </div>
</div>

<div id="ruleModal" class="modal" aria-hidden="true">
  <div class="modalCard" role="dialog" aria-modal="true">
    <div class="modalTitle">üìå ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô)</div>
    <div class="modalText">
      1) ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡∏™‡∏∞‡∏™‡∏° ‚Äú‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‚Äù ‡∏Ñ‡∏£‡∏ö 365 ‡∏ö‡∏≤‡∏ó‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡∏∂‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ<br>
      2) ‡∏ó‡∏≥‡∏¢‡∏≠‡∏î 10 ‡πÄ‡∏ó‡πà‡∏≤ ‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ 10 ‡πÄ‡∏ó‡πà‡∏≤<br>
      3) 1 ‡∏Ñ‡∏ô/1 ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå/1 ‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    </div>
    <button class="modalBtn" id="modalAck" type="button">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
  </div>
</div>

<script>
/* ================= CONFIG =================
   ‚úÖ ‡πÇ‡∏´‡∏°‡∏î A: ‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å Apps Script /exec -> ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ SCRIPT_URL
   ‚úÖ ‡πÇ‡∏´‡∏°‡∏î B: ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÇ‡∏Æ‡∏™‡πÄ‡∏≠‡∏á -> ‡πÉ‡∏™‡πà SCRIPT_URL ‡πÄ‡∏õ‡πá‡∏ô https://script.google.com/macros/s/XXXX/exec
*/
let SCRIPT_URL = window.location.href; // ‡πÇ‡∏´‡∏°‡∏î A ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
 SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyM5gqgZdZRAi2clNJhbRhhLiacHYmOWWcbQJFtR98ZaXVvyuWfCIKc4RD61EQicx6e/exec"; // ‡πÇ‡∏´‡∏°‡∏î B (‡∏õ‡∏•‡∏î‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á)

/* ‡∏Å‡∏±‡∏ô URL ‡πÅ‡∏õ‡∏•‡∏Å: ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà /exec ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô /exec ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å GAS */
if (/script\.google\.com\/macros\/s\/.+\/(dev|userCodeAppPanel)/.test(SCRIPT_URL)) {
  // ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ /exec ‡πÅ‡∏ï‡πà‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ
}

const DEVICE_ID_KEY="rr365_device_id";

let S={token:"",nonce:"",issued_at:0,captcha_id:"",captcha_q:"",min_delay_ms:6000,max_delay_ms:45000};
let READY_AT=0, TIMER=null;

const $phone=document.getElementById("phone");
const $btnCheck=document.getElementById("btnCheck");
const $btnIssue=document.getElementById("btnIssue");
const $btnJoin=document.getElementById("btnJoin");
const $msg=document.getElementById("msg");
const $capLabel=document.getElementById("capLabel");
const $captchaA=document.getElementById("captchaA");
const $copyWrap=document.getElementById("copyWrap");
const $promoCode=document.getElementById("promoCode");
const $btnCopy=document.getElementById("btnCopy");

const $ruleModal=document.getElementById("ruleModal");
document.getElementById("modalAck").onclick=()=>{ $ruleModal.classList.remove("show"); };

function openModal(){ $ruleModal.classList.add("show"); }

function show(text,type="ok"){
  $msg.style.display="block";
  $msg.className="msg "+(type==="err"?"err":"ok");
  $msg.textContent=text;
}
function hideCopy(){ $copyWrap.style.display="none"; $promoCode.textContent="RRXXXXXXXX"; }

function normalizePhone(v){
  let p=String(v||"").replace(/\D/g,"");
  if(p.startsWith("66")) p="0"+p.slice(2);
  if(!/^0[689]\d{8}$/.test(p)) return "";
  return p;
}
function getOrCreateDeviceId(){
  let id=localStorage.getItem(DEVICE_ID_KEY);
  if(!id){
    id="dev_"+Math.random().toString(36).slice(2)+Date.now().toString(36);
    localStorage.setItem(DEVICE_ID_KEY,id);
  }
  return id;
}
function getFingerprint(){
  const data=[screen.width,screen.height,devicePixelRatio,navigator.language||"",navigator.platform||""].join("|");
  let h=0; for(let i=0;i<data.length;i++){ h=((h<<5)-h)+data.charCodeAt(i); h|=0; }
  return "fp_"+Math.abs(h);
}
function getUaKey(){
  const ua=navigator.userAgent||"";
  let h=0; for(let i=0;i<ua.length;i++){ h=((h<<5)-h)+ua.charCodeAt(i); h|=0; }
  return "ua_"+Math.abs(h);
}

/* JSONP */
function jsonp(params){
  return new Promise((resolve,reject)=>{
    // ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô /exec ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    if(!/\/exec(\?|$)/.test(SCRIPT_URL)){
      show("SCRIPT_URL ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ /exec ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô","err");
      return reject(new Error("BAD_EXEC_URL"));
    }

    const cb="cb_"+Math.random().toString(36).slice(2);
    params.jsonp="1"; params.callback=cb; params._ts=Date.now();
    const s=document.createElement("script");
    window[cb]=(d)=>{ cleanup(); resolve(d); };
    s.onerror=()=>{
      cleanup();
      show(
        "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÇ‡∏´‡∏•‡∏î SCRIPT_URL ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)\n"+
        "- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå /exec\n"+
        "- Deploy ‡πÄ‡∏õ‡πá‡∏ô Anyone\n"+
        "- ‡∏•‡∏≠‡∏á‡∏õ‡∏¥‡∏î Adblock/Extension\n"+
        "- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏≠‡∏≤ HTML ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÇ‡∏Æ‡∏™ ‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏•‡πá‡∏≠‡∏Å script.google.com",
        "err"
      );
      reject(new Error("LOAD_ERR"));
    };
    function cleanup(){ try{delete window[cb];}catch(_){ } if(s.parentNode) s.parentNode.removeChild(s); }
    s.src=SCRIPT_URL+"?"+new URLSearchParams(params).toString();
    document.body.appendChild(s);
  });
}

async function call(action){
  const phone=normalizePhone($phone.value);
  if(!phone){ show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","err"); return null; }

  const base={
    action, phone,
    deviceId:getOrCreateDeviceId(),
    fingerprint:getFingerprint(),
    ua_key:getUaKey(),
    userAgent:navigator.userAgent
  };

  if(action==="register"){
    base.token=S.token; base.nonce=S.nonce; base.issued_at=S.issued_at;
    base.captcha_id=S.captcha_id; base.captcha_a=($captchaA.value||"").trim();
  }
  return await jsonp(base);
}

function resetSession(){
  S={token:"",nonce:"",issued_at:0,captcha_id:"",captcha_q:"",min_delay_ms:6000,max_delay_ms:45000};
  READY_AT=0;
  if(TIMER){clearInterval(TIMER);TIMER=null;}
  $btnJoin.disabled=true;
}

$btnCheck.onclick=async ()=>{
  hideCopy(); resetSession();
  $btnIssue.disabled=true; $btnJoin.disabled=true;
  $capLabel.style.display="none"; $captchaA.style.display="none"; $captchaA.value="";

  const d=await call("check").catch(()=>null);
  if(!d) return;
  if(!d.ok){ show(d.msg||"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","err"); return; }

  show(d.msg||"‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß","ok");
  // ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (‡∏à‡∏∞‡πÑ‡∏õ‡∏ï‡∏¥‡∏î WAIT_APPROVAL ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà APPROVED)
  $btnIssue.disabled=false;
};

$btnIssue.onclick=async ()=>{
  hideCopy(); resetSession();

  const d=await call("issue").catch(()=>null);
  if(!d) return;
  if(!d.ok){ show(d.msg||"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","err"); return; }

  S.token=d.token; S.nonce=d.nonce; S.issued_at=Number(d.issued_at||0);
  S.captcha_id=d.captcha_id; S.captcha_q=d.captcha_q;
  S.min_delay_ms=Number(d.min_delay_ms||6000);
  S.max_delay_ms=Number(d.max_delay_ms||45000);

  $capLabel.style.display="block";
  $captchaA.style.display="block";
  $capLabel.textContent=S.captcha_q||"‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô";
  $captchaA.value="";

  READY_AT=Date.now()+S.min_delay_ms;
  show("‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏≠ 6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î","ok");

  TIMER=setInterval(()=>{
    if(Date.now()>=READY_AT){
      $btnJoin.disabled=false;
      clearInterval(TIMER); TIMER=null;
    }
  },250);
};

$btnJoin.onclick=async ()=>{
  if(Date.now()<READY_AT){
    const left=Math.ceil((READY_AT-Date.now())/1000);
    show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏≠‡∏µ‡∏Å "+left+" ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó)","err");
    return;
  }
  if(!$captchaA.value.trim()){
    show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏Å‡πà‡∏≠‡∏ô","err");
    return;
  }

  const d=await call("register").catch(()=>null);
  if(!d) return;
  if(!d.ok){ show(d.msg||"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","err"); return; }

  if(d.registered){
    show("üéâ ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","ok");
    if(d.promo_code){
      $promoCode.textContent=d.promo_code;
      $copyWrap.style.display="flex";
    }
    openModal();
    resetSession();
  }else{
    show(d.msg||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ","err");
  }
};

$btnCopy.onclick=async ()=>{
  const txt=($promoCode.textContent||"").trim();
  try{
    await navigator.clipboard.writeText(txt);
    show("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì","ok");
  }catch(_){
    show("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏≠‡∏á","err");
  }
};
</script>
</body>
</html>
