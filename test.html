<?php
/**
 * RR365 Shortcode (WP-safe) - JSONP + 1 ‡∏Ñ‡∏ô 1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á + HARD BLOCK ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ù‡∏±‡πà‡∏á GAS
 * ‡πÉ‡∏ä‡πâ shortcode: [rr365]
 * SCRIPT_URL ‡πÉ‡∏™‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß
 */

add_shortcode('rr365', function () {

  // ‚úÖ ‡πÉ‡∏™‡πà /exec ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß
  $SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyZyKbLFIkCpeVE2FSq7U1oIkcwyn_Kq8pQFSD4woUfe56jVjWhJE1811nG8rGWYw7z-Q/exec";

  ob_start(); ?>
  <style>
  :root{
    --bg:#0b0b0b; --card:#141414; --line:rgba(255,255,255,.12);
    --txt:#fff; --muted:#cfcfcf;
    --accent:#ff2b2b; --accent2:#b80000;
    --ok:#36d399; --bad:#ff5a5f;
  }
  .rr365, .rr365 *{box-sizing:border-box}
  .rr365{
    padding:24px;
    font-family:system-ui,-apple-system,"Segoe UI",Tahoma,sans-serif;
    background:radial-gradient(900px 500px at 50% -10%, rgba(255,60,60,.15), transparent 60%), var(--bg);
    color:var(--txt);
    position:relative; z-index:999999; /* ‡∏Å‡∏±‡∏ô‡∏ò‡∏µ‡∏°/‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏±‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å */
  }
  .rr365 .card{
    max-width:560px;margin:0 auto;
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid var(--line); border-radius:24px; padding:18px;
    box-shadow:0 20px 50px rgba(0,0,0,.6);
    position:relative; z-index:999999;
  }
  .rr365 .hero{
    width:100%; border-radius:16px; display:block;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.25);
  }
  .rr365 h1{font-size:20px;margin:12px 0 6px}
  .rr365 p{margin:0 0 14px;color:var(--muted);line-height:1.6}
  .rr365 label{display:block;margin:10px 0 6px;color:var(--muted)}
  .rr365 input{
    width:100%;padding:12px 14px;border-radius:14px;
    border:1px solid var(--line);background:#0f0f0f;color:#fff;font-size:16px;
  }
  .rr365 .row{display:flex;gap:10px;margin-top:12px}
  .rr365 button{
    flex:1;padding:12px 14px;border-radius:14px;border:0;
    font-size:16px;font-weight:800;color:#fff;cursor:pointer;
    pointer-events:auto !important;
    position:relative; z-index:999999;
  }
  .rr365 .btnAlt{background:#2a2a2a}
  .rr365 .btnMain{background:linear-gradient(135deg,var(--accent),var(--accent2))}
  .rr365 button:disabled{opacity:.55;cursor:not-allowed}
  .rr365 .msg{
    margin-top:12px;padding:12px;border-radius:14px;
    border:1px solid var(--line);background:rgba(0,0,0,.25);
    white-space:pre-line;display:none;line-height:1.6;
  }
  .rr365 .ok{border-color:rgba(54,211,153,.4)}
  .rr365 .err{border-color:rgba(255,90,95,.45)}
  .rr365 .hint{font-size:12px;color:#bfbfbf;margin-top:10px;line-height:1.6}
  .rr365 .copyBox{
    margin-top:12px;padding:12px;border-radius:14px;
    border:1px dashed rgba(255,255,255,.25);background:rgba(0,0,0,.25);
    display:none;align-items:center;gap:10px;
  }
  .rr365 .copyCode{flex:1;font-weight:900;font-size:16px;letter-spacing:1px;user-select:all}
  .rr365 .copyBtn{
    padding:10px 14px;border-radius:12px;border:0;cursor:pointer;
    font-weight:900;color:#fff;background:linear-gradient(135deg,#22c55e,#16a34a);
  }
  .rr365 .copyBtn.copied{background:linear-gradient(135deg,#3b82f6,#2563eb)}
  .rr365 .modal{
    position:fixed; inset:0; background:rgba(0,0,0,.70);
    display:none; align-items:center; justify-content:center; padding:18px; z-index:9999999;
  }
  .rr365 .modal.show{display:flex}
  .rr365 .modalCard{
    width:min(560px, 100%); border-radius:18px; padding:16px;
    border:1px solid rgba(255,255,255,.14);
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
    box-shadow:0 20px 60px rgba(0,0,0,.75);
  }
  .rr365 .modalTitle{font-weight:900;font-size:18px;margin-bottom:10px}
  .rr365 .modalText{color:#e9e9e9;line-height:1.7;margin-bottom:12px}
  .rr365 .modalBtnMain{
    width:100%; padding:12px 14px; border-radius:14px; border:0;
    font-weight:900; cursor:pointer; color:#fff;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
  }
  </style>

  <div class="rr365" data-script-url="<?php echo esc_attr($SCRIPT_URL); ?>">
    <div class="card">

      <img
        class="hero"
        src="https://img5.pic.in.th/file/secure-sv1/photo_--_--2bb7d3a2870ef8d6.jpg"
        alt="‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á"
        loading="eager"
        decoding="async"
      />

      <h1>üéÅ ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏à‡∏Å‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 38,888 ‡∏ö‡∏≤‡∏ó üéÅ</h1>
      <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î (‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)</p>

      <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
      <input class="rr-phone" inputmode="numeric" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0611111111"/>

      <div class="row">
        <button class="rr-check btnAlt" type="button">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
        <button class="rr-join btnMain" type="button" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
      </div>

      <button class="rr-poll btnAlt" type="button" style="margin-top:10px;width:100%">
        ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ / ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î
      </button>

      <div class="rr-msg msg"></div>

      <div class="rr-copyWrap copyBox">
        <div class="rr-promoCode copyCode">RRXXXXXXXX</div>
        <button class="rr-copyBtn copyBtn" type="button">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
      </div>

      <div class="hint">
        * ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 365 ‡∏ö‡∏≤‡∏ó‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∂‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÑ‡∏î‡πâ<br>
        * ‡∏ó‡∏≥‡∏¢‡∏≠‡∏î 10 ‡πÄ‡∏ó‡πà‡∏≤ ‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ 10 ‡πÄ‡∏ó‡πà‡∏≤<br>
        * 1 ‡∏Ñ‡∏ô / 1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
      </div>

    </div>

    <div class="rr-modal modal" aria-hidden="true">
      <div class="modalCard" role="dialog" aria-modal="true">
        <div class="modalTitle">üìå ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô)</div>
        <div class="modalText">
          1) ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 365 ‡∏ö‡∏≤‡∏ó<br>
          2) ‡∏ó‡∏≥‡∏¢‡∏≠‡∏î 10 ‡πÄ‡∏ó‡πà‡∏≤ ‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ 10 ‡πÄ‡∏ó‡πà‡∏≤<br>
          3) 1 ‡∏Ñ‡∏ô / 1 ‡∏¢‡∏π‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô<br>
          4) ‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥<br>
          5) 1 ‡∏Ñ‡∏ô / 1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
        </div>
        <button class="rr-ack modalBtnMain" type="button">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
      </div>
    </div>
  </div>

  <script>
  (function(){
    function normalizePhone(v){
      let s=String(v||"").trim(); const th="‡πê‡πë‡πí‡πì‡πî‡πï‡πñ‡πó‡πò‡πô";
      for(let i=0;i<th.length;i++) s=s.replace(new RegExp(th[i],"g"),String(i));
      let p=s.replace(/\D/g,"");
      if(p.startsWith("0066")) p=p.slice(2);
      if(p.startsWith("66")) p="0"+p.slice(2);
      if(!p.startsWith("0") && p.length===9) p="0"+p;
      return /^0[689]\d{8}$/.test(p)?p:"";
    }

    function getDeviceId(){
      const KEY="rr365_device_id_v1";
      let id=localStorage.getItem(KEY);
      if(!id){
        if (window.crypto && crypto.randomUUID) id=crypto.randomUUID();
        else id="d_"+Math.random().toString(36).slice(2)+Date.now().toString(36);
        localStorage.setItem(KEY,id);
      }
      return id;
    }

    function initRR365(root){
      const SCRIPT_URL = root.getAttribute("data-script-url") || "";
      const phone = root.querySelector(".rr-phone");
      const btnCheck = root.querySelector(".rr-check");
      const btnJoin  = root.querySelector(".rr-join");
      const btnPoll  = root.querySelector(".rr-poll");
      const msg      = root.querySelector(".rr-msg");
      const copyWrap = root.querySelector(".rr-copyWrap");
      const promoCode= root.querySelector(".rr-promoCode");
      const copyBtn  = root.querySelector(".rr-copyBtn");
      const modal    = root.querySelector(".rr-modal");
      const ack      = root.querySelector(".rr-ack");

      const DEVICE_ID = getDeviceId();
      const UA  = navigator.userAgent || "";
      const TZ  = (Intl.DateTimeFormat().resolvedOptions().timeZone || "unknown");
      const SCR = (screen && screen.width && screen.height) ? (screen.width+"x"+screen.height) : "na";

      function openRule(){ modal.classList.add("show"); document.body.style.overflow="hidden"; }
      function closeRule(){ modal.classList.remove("show"); document.body.style.overflow=""; }
      ack.addEventListener("click", closeRule);

      function show(t,type){
        msg.style.display="block";
        msg.className="rr-msg msg "+(type==="err"?"err":"ok");
        msg.textContent=t;
      }
      function hideCopy(){ copyWrap.style.display="none"; promoCode.textContent="RRXXXXXXXX"; }

      function jsonp(params){
        return new Promise((res,rej)=>{
          const cb="cb_"+Math.random().toString(36).slice(2);
          params.callback=cb;
          params._ts=Date.now();

          // ‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (1 ‡∏Ñ‡∏ô 1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)
          params.device_id = DEVICE_ID;
          params.ua = UA;
          params.tz = TZ;
          params.scr = SCR;

          const s=document.createElement("script");
          s.src = SCRIPT_URL + "?" + new URLSearchParams(params).toString();

          window[cb]=(d)=>{ try{ delete window[cb]; }catch(_){ window[cb]=undefined; } s.remove(); res(d); };
          s.onerror=()=>{ try{ delete window[cb]; }catch(_){ window[cb]=undefined; } s.remove(); rej(new Error("JSONP_ERROR")); };

          document.body.appendChild(s);
        });
      }

      copyBtn.addEventListener("click", async ()=>{
        const t=(promoCode.textContent||"").trim(); if(!t) return;
        try{
          await navigator.clipboard.writeText(t);
          copyBtn.classList.add("copied");
          setTimeout(()=>copyBtn.classList.remove("copied"),1200);
        }catch(e){
          show("‚ùå ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏ö‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ https)","err");
        }
      });

      btnCheck.addEventListener("click", async ()=>{
        hideCopy(); btnJoin.disabled=true;
        const p=normalizePhone(phone.value);
        if(!p){ show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","err"); return; }
        if(!SCRIPT_URL || SCRIPT_URL.indexOf("/exec") === -1){
          show("‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° (SCRIPT_URL ‡∏ú‡∏¥‡∏î)","err"); return;
        }

        show("‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå...");
        const d=await jsonp({action:"check",phone:p}).catch(()=>null);
        if(!d){ show("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏ä‡πá‡∏Ñ Deploy /exec)","err"); return; }
        if(!d.ok){ show(d.msg || "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç","err"); return; }

        show(d.msg || "‚úÖ ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÑ‡∏î‡πâ","ok");
        btnJoin.disabled=false;
      });

      btnJoin.addEventListener("click", async ()=>{
        hideCopy();
        const p=normalizePhone(phone.value);
        if(!p){ show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","err"); return; }

        show("‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°...");
        const d=await jsonp({action:"register",phone:p}).catch(()=>null);
        if(!d){ show("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏ä‡πá‡∏Ñ Deploy /exec)","err"); return; }
        if(!d.ok){ show(d.msg || "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","err"); return; }

        show(d.msg || "‚úÖ ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥","ok");
        openRule();
      });

      btnPoll.addEventListener("click", async ()=>{
        hideCopy();
        const p=normalizePhone(phone.value);
        if(!p){ show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","err"); return; }

        show("‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞...");
        const d=await jsonp({action:"poll",phone:p}).catch(()=>null);
        if(!d){ show("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏ä‡πá‡∏Ñ Deploy /exec)","err"); return; }
        if(!d.ok){ show(d.msg || "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°","err"); return; }

        if(d.status==="APPROVED" && d.promo_code){
          promoCode.textContent=d.promo_code;
          copyWrap.style.display="flex";
          show("üéâ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢","ok");
          openRule();
          return;
        }

        if(d.status==="PENDING"){ show("‚è≥ ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô","ok"); return; }
        if(d.status==="REJECTED"){ show("‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô","err"); return; }
        if(d.status==="USED"){ show("‚ö†Ô∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß","err"); return; }

        show(d.msg || ("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: "+(d.status||"UNKNOWN")),"ok");
      });
    }

    document.addEventListener("DOMContentLoaded", function(){
      document.querySelectorAll(".rr365[data-script-url]").forEach(initRR365);
    });
  })();
  </script>
  <?php
  return ob_get_clean();
});
