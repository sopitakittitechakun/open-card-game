<style>
:root{
  --bg:#0b0b0b; --line:rgba(255,255,255,.12);
  --txt:#fff; --muted:#cfcfcf;
  --accent:#ff2b2b; --accent2:#b80000;
}
.rr365, .rr365 *{box-sizing:border-box}
.rr365{
  padding:24px;
  font-family:system-ui,-apple-system,"Segoe UI",Tahoma,sans-serif;
  background:#0b0b0b;
  color:#fff;
  position:relative; z-index:999999;
}
.rr365 .card{
  max-width:560px;margin:0 auto;
  background:#141414;
  border:1px solid var(--line);
  border-radius:24px;
  padding:18px;
}
.rr365 img{width:100%;border-radius:16px}
.rr365 input{
  width:100%;padding:12px;border-radius:14px;
  border:1px solid var(--line);background:#000;color:#fff;
}
.rr365 button{
  width:100%;padding:12px;margin-top:10px;
  border-radius:14px;border:0;font-weight:700;cursor:pointer;
}
.btn-gray{background:#333;color:#fff}
.btn-red{background:#b80000;color:#fff}
.msg{
  margin-top:12px;padding:12px;border-radius:12px;
  background:#1a1a1a;border:1px solid #333;
  white-space:pre-line
}
.err{border-color:#ff5a5f;color:#ffb3b3}
.ok{border-color:#36d399;color:#b9f6dc}
</style>

<div class="rr365">
  <div class="card">
    <img src="https://img5.pic.in.th/file/secure-sv1/photo_--_--2bb7d3a2870ef8d6.jpg">

    <p style="margin:10px 0">üéÅ ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏à‡∏Å‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 38,888 ‡∏ö‡∏≤‡∏ó</p>

    <input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">

    <button id="check" class="btn-gray">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
    <button id="join" class="btn-red">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
    <button id="poll" class="btn-gray">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ / ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î</button>

    <div id="msg" class="msg"></div>
  </div>
</div>

<script>
/* üî¥ SCRIPT_URL ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà */
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbyZyKbLFIkCpeVE2FSq7U1oIkcwyn_Kq8pQFSD4woUfe56jVjWhJE1811nG8rGWYw7z-Q/exec";

const $ = id => document.getElementById(id);
const msg = $("msg");

msg.textContent = "‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß";
msg.className = "msg ok";

function phoneOK(p){
  p = (p||"").replace(/\D/g,"");
  if(p.startsWith("66")) p="0"+p.slice(2);
  return /^0[689]\d{8}$/.test(p)?p:"";
}

function deviceId(){
  let k="rr365_device";
  let v=localStorage.getItem(k);
  if(!v){v="d_"+Date.now()+"_"+Math.random().toString(36).slice(2);localStorage.setItem(k,v);}
  return v;
}

function jsonp(params){
  return new Promise((res,rej)=>{
    let cb="cb_"+Math.random().toString(36).slice(2);
    params.callback=cb;
    params.device_id=deviceId();
    let s=document.createElement("script");
    s.src=SCRIPT_URL+"?"+new URLSearchParams(params);
    window[cb]=d=>{delete window[cb];s.remove();res(d)};
    s.onerror=()=>{rej()};
    document.body.appendChild(s);
  });
}

$("check").onclick=async()=>{
  let p=phoneOK($("phone").value);
  if(!p){msg.textContent="‚ùå ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";msg.className="msg err";return;}
  let d=await jsonp({action:"check",phone:p});
  msg.textContent=JSON.stringify(d,null,2);
  msg.className="msg ok";
};

$("join").onclick=async()=>{
  let p=phoneOK($("phone").value);
  let d=await jsonp({action:"register",phone:p});
  msg.textContent=JSON.stringify(d,null,2);
  msg.className="msg ok";
};

$("poll").onclick=async()=>{
  let p=phoneOK($("phone").value);
  let d=await jsonp({action:"poll",phone:p});
  msg.textContent=JSON.stringify(d,null,2);
  msg.className="msg ok";
};
</script>
