<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° | ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏∏‡πà‡∏°</title>
<meta name="color-scheme" content="dark"/>

<style>
:root{
  --bg:#0b0b0b; --card:#141414; --line:rgba(255,255,255,.12);
  --txt:#fff; --muted:#cfcfcf;
  --accent:#ff2b2b; --accent2:#b80000;
  --ok:#36d399; --bad:#ff5a5f;
}
*{box-sizing:border-box}
body{
  margin:0;padding:24px;
  font-family:system-ui,-apple-system,"Segoe UI",Tahoma,sans-serif;
  background:radial-gradient(900px 500px at 50% -10%, rgba(255,60,60,.15), transparent 60%), var(--bg);
  color:var(--txt);
}
.card{
  max-width:560px;margin:0 auto;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--line); border-radius:24px; padding:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}
h1{text-align:center;font-size:20px;margin:10px 0 6px}
p{text-align:center;color:var(--muted);margin:0 0 14px}
label{display:block;margin:10px 0 6px;color:var(--muted)}
input{
  width:100%;padding:12px 14px;border-radius:14px;
  border:1px solid var(--line);background:#0f0f0f;color:#fff;font-size:16px;
}
.row{display:flex;gap:10px;margin-top:12px}
button{
  flex:1;padding:12px;border-radius:14px;border:0;
  font-size:16px;font-weight:800;color:#fff;cursor:pointer;
}
.btnAlt{background:#2a2a2a}
.btnMain{background:linear-gradient(135deg,var(--accent),var(--accent2))}
.btnCopy{background:linear-gradient(135deg,#22c55e,#16a34a);margin-top:10px}
button:disabled{opacity:.55;cursor:not-allowed}

.msg{
  margin-top:12px;padding:12px;border-radius:14px;
  border:1px solid var(--line);background:rgba(0,0,0,.25);
  white-space:pre-line;line-height:1.6;display:none;
}
.msg.ok{border-color:rgba(54,211,153,.4)}
.msg.err{border-color:rgba(255,90,95,.45)}

.promoBox{
  margin-top:12px;padding:14px;border-radius:16px;
  border:1px dashed rgba(255,255,255,.35);
  background:rgba(0,0,0,.3);text-align:center;display:none;
}
.promoCode{
  font-size:22px;font-weight:900;letter-spacing:1px;
  margin:6px 0 10px;color:#7dd3fc;
}
.copyMsg{font-size:13px;color:#a7f3d0;display:none}

.linkBox{
  margin-top:12px;padding:12px;border-radius:14px;
  border:1px dashed rgba(255,255,255,.25);
  background:rgba(0,0,0,.25);text-align:center;
}
.linkBox a{color:#7dd3fc;font-weight:800;text-decoration:none}
</style>
</head>

<body>
<div class="card">

<img src="https://img2.pic.in.th/photo_--_--0e7826f8427924c9.jpg"
     style="max-width:100%;border-radius:16px">

<h1>üéÅ ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏à‡∏Å‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 38,888 ‡∏ö‡∏≤‡∏ó üéÅ</h1>
<p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 1 ‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏ï‡πà‡∏≠ 1 ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</p>

<label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
<input id="phone" inputmode="numeric" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0611111111">

<div class="row">
  <button id="btnCheck" class="btnAlt">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
  <button id="btnJoin" class="btnMain" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
</div>

<div id="msg" class="msg"></div>

<div id="promoBox" class="promoBox">
  <div>üéÅ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
  <div id="promoCode" class="promoCode"></div>
  <button id="btnCopy" class="btnCopy">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î</button>
  <div id="copyMsg" class="copyMsg">‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>
</div>

<div class="linkBox">
  üëâ ‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ü‡∏£‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà<br>
  <a href="https://rumruay365.uk/events/free-credit" target="_blank">
    https://rumruay365.uk/events/free-credit
  </a>
</div>

</div>

<script>
/* ===== CONFIG ===== */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwF6-h_Ip_gJHDbigip7x3oc8fDAHcwcn814k4ufXn4hlJ_lMDdhRsqYM7b40G6lWGLeg/exec";

/* ===== ELEMENTS (‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ) ===== */
const phone     = document.getElementById("phone");
const btnCheck  = document.getElementById("btnCheck");
const btnJoin   = document.getElementById("btnJoin");
const msg       = document.getElementById("msg");
const promoBox  = document.getElementById("promoBox");
const promoCode = document.getElementById("promoCode");
const btnCopy   = document.getElementById("btnCopy");
const copyMsg   = document.getElementById("copyMsg");

/* ===== STATE ===== */
let SAVED_TOKEN = "";
let TOKEN_EXPIRES_AT = 0;

/* ===== HELPERS ===== */
function show(text,type="ok"){
  msg.style.display="block";
  msg.className="msg "+type;
  msg.textContent=text;
}
function normalizePhone(v){
  let p=v.replace(/\D/g,"");
  if(p.startsWith("66")) p="0"+p.slice(2);
  return /^0[689]\d{8}$/.test(p)?p:"";
}
function jsonp(params){
  return new Promise(res=>{
    const cb="cb_"+Math.random().toString(36).slice(2);
    params.jsonp=1; params.callback=cb;
    const s=document.createElement("script");
    s.src=SCRIPT_URL+"?"+new URLSearchParams(params);
    window[cb]=d=>{delete window[cb];s.remove();res(d);}
    document.body.appendChild(s);
  });
}

/* ===== EVENTS ===== */
btnCheck.addEventListener("click", async ()=>{
  const p=normalizePhone(phone.value);
  if(!p) return show("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","err");

  btnJoin.disabled=true;
  promoBox.style.display="none";

  const d=await jsonp({action:"check",phone:p});
  if(!d.ok) return show(d.msg||"‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô","err");

  SAVED_TOKEN=d.token;
  TOKEN_EXPIRES_AT=Date.now()+d.token_ttl_sec*1000;

  show("‚úÖ ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î","ok");
  btnJoin.disabled=false;
});

btnJoin.addEventListener("click", async ()=>{
  const p=normalizePhone(phone.value);
  const d=await jsonp({action:"register",phone:p,token:SAVED_TOKEN});
  if(!d.ok) return show(d.msg||"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","err");

  promoCode.textContent=d.promo_code||"";
  promoBox.style.display="block";
  show("üéâ ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","ok");
});

btnCopy.addEventListener("click", ()=>{
  navigator.clipboard.writeText(promoCode.textContent).then(()=>{
    copyMsg.style.display="block";
    setTimeout(()=>copyMsg.style.display="none",2000);
  });
});
</script>

</body>
</html>
